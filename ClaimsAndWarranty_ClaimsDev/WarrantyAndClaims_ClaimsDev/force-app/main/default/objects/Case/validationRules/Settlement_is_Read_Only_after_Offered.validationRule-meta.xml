<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Settlement_is_Read_Only_after_Offered</fullName>
    <active>true</active>
    <description>When case is in either Offered, Settling or Closed stage, the Settlement Amount fields cannot be edited.</description>
    <errorConditionFormula>AND(
	ClaimApproved__c ,
	OR(
		ISCHANGED( Settlement_Amount__c ),
		ISCHANGED( Num_of_Bundles_for_Settlement__c ),  
		ISCHANGED( Actual_Labour_Rate__c ),
		ISCHANGED( Actual_Labour_Settlement__c ),
        ISCHANGED( Settlement_Type__c ),
		ISCHANGED( Tax_Rate__c), 
		ISCHANGED( Secondary_Tax_Rate__c ),
		ISCHANGED( Bundle_Rate_Cash_Settlement__c ),
		ISCHANGED( Suggested_Settlement__c), 
		ISCHANGED( Suggested_Labour_Settlement_Pre_CPI__c ),
		ISCHANGED( Suggested_Labour_Settlement__c ),
		ISCHANGED( Suggested_Bundles_for_Settlement__c ),
  ISCHANGED( Bundle_Rate_Hand_Seal__c ),
		ISCHANGED( Total_Labor_Override_Amount__c)
	),
	$Profile.Name &lt;&gt; &apos;System Administrator&apos;,
		OR(NOT(ISCHANGED(Claim_Stage__c)),
				AND(
				ISCHANGED(Claim_Stage__c),
				 TEXT(PRIORVALUE(Claim_Stage__c)) &lt;&gt; &apos;Closed&apos;
		))		
				
)</errorConditionFormula>
    <errorMessage>Case&apos;s settlement information cannot be edited after it has been approved</errorMessage>
</ValidationRule>
