<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Unable_to_process_IAAP_contractor_dates</fullName>
    <active>true</active>
    <description>Contractors hot works insurance has expired or the IAAP registration has expired the system currently allows the stage to be moved; No validation rule exist to check that the two dates field ClaimsV2-623 https://ikoussfsc.atlassian.net/browse/CLAIMSV2-623</description>
    <errorConditionFormula>AND
(RecordType.DeveloperName = &apos;Commercial_Warranty&apos;,
OR (  ISBLANK( Contract_IAAP_Registration__c ) ,  ISBLANK(Contract_IAAP_Expiry_Date__c),  ISBLANK(IAAP_Annual_Hot_Works_Insurance_Renewal__c)     , DATEVALUE(CreatedDate) &gt;  IAAP_Annual_Hot_Works_Insurance_Renewal__c, 
 DATEVALUE(CreatedDate) &gt;  Contract_IAAP_Expiry_Date__c ),
ISCHANGED( Warranty_Status__c ) ,
OR (AND(ISPICKVAL(Warranty_Status__c,&apos;Completed&apos;), ISPICKVAL(Warranty_Substatus__c,&apos;Issued&apos;)), ISPICKVAL(Warranty_Status__c,&apos;In Progress&apos;))
)</errorConditionFormula>
    <errorMessage>The Contractor has an invalid expiry date.  Please check the Contractors IAAP registration and insurance dates.</errorMessage>
</ValidationRule>
