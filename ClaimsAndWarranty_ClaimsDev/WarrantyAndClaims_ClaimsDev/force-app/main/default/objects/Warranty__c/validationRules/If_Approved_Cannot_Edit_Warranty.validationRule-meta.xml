<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>If_Approved_Cannot_Edit_Warranty</fullName>
    <active>true</active>
    <description>CLAIMSV2-38 The Deficiency Status cannot be edited if the Warranty is approved. I guess it would be nice to lock the Warranty record. Why aren&apos;t we doing that?
CLAIMSV2-569 Prevent field changes if sub-status = &apos;Approved&apos;</description>
    <errorConditionFormula>AND($Profile.Name &lt;&gt; &apos;System Administrator&apos;,
OR(ISPICKVAL( Warranty_Substatus__c , &apos;Approved&apos;),ISPICKVAL( Warranty_Status__c ,&apos;Completed&apos;),ISPICKVAL( Warranty_Substatus__c, &apos;Issued&apos; ))
&amp;&amp; 
OR (
ISCHANGED(OwnerId),
ISCHANGED(Name),
ISCHANGED(RecordTypeId),
ISCHANGED(Architect__c),
ISCHANGED(Building__c),
ISCHANGED(Confirmation_of_Repairs__c),
ISCHANGED(Consultant__c),
ISCHANGED(Contractor__c),
ISCHANGED(Count_of_Associated_Related_Products__c),
ISCHANGED(Deck_Type__c),
ISCHANGED(Details_Roof_Specification__c),
ISCHANGED(Fasteners__c),
ISCHANGED(Final_Inspection_Report_Letter__c),
ISCHANGED(IKO_External_ID__c),
ISCHANGED(IKO_Source_System__c),
ISCHANGED(Installation_Deficiency_Status__c),
ISCHANGED(Insulation__c),
ISCHANGED(Invoice_Amount_Override__c),
ISCHANGED(Invoice_Sent_Date__c),
ISCHANGED(Legacy__c),
ISCHANGED(New_Roof__c),
ISCHANGED(Note__c),
ISCHANGED(Other_Products__c),
ISCHANGED(Overlay_Board__c),
ISCHANGED(Payment_Received_Date__c),
ISCHANGED(Proof_of_Purchase__c),
ISCHANGED(Re_Cover_Limited_Warranty_Application__c),
ISCHANGED(Recover__c),
ISCHANGED(Registration_Prefix__c),
ISCHANGED(Related_Product__c),
ISCHANGED(Roof_Plan__c),
ISCHANGED(Roof_Section__c),
ISCHANGED(Sequence_Number__c),
ISCHANGED(Slope__c),
ISCHANGED(Square_Footage_of_Installation__c),
ISCHANGED(Tear_Off__c),
ISCHANGED(Thermoscan_Analysis__c),
ISCHANGED(Transferred__c),
ISCHANGED(Type__c),
ISCHANGED(Vapour_Retardant__c),
ISCHANGED(WCMS_Approver__c),
ISCHANGED(Warranty_Owner__c),
ISCHANGED(Warranty_Owner_Company__c),
ISCHANGED(Warranty_Registration_Id__c),
ISCHANGED(Warranty_Start_Date__c),
ISCHANGED(Warranty_Term__c),
ISCHANGED(Warranty_Transfer_Count__c),
ISCHANGED(Work_Completion_Date__c),
ISCHANGED(Work_Start_Date__c)
))</errorConditionFormula>
    <errorMessage>Warranty field values cannot be modified after the warranty has been approved.</errorMessage>
</ValidationRule>
